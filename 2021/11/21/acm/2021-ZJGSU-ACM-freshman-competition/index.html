

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/image/default/favicon.ico">
  <link rel="icon" type="image/png" href="/image/default/favicon.ico">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Shiroha">
  <meta name="keywords" content="">
  <title>2021年浙江工商大学新生赛题解 - Shiroha白羽的博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.3.0"></head>


<body>
  <header style="height: 80vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Mauve</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/image/default/main_bg.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="2021年浙江工商大学新生赛题解">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Shiroha
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-11-21 14:15" pubdate>
        2021年11月21日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      6.7k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      99
       分钟
    </span>
  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        浏览 <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
            <div class="scroll-down-bar">
              <i class="iconfont icon-arrowdown"></i>
            </div>
          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">2021年浙江工商大学新生赛题解</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2 个月前
                
              </p>
            
            <div class="markdown-body">
              <div style="color: red;">
  <ul>
    <li>
        本篇中的题目顺序为预期难度顺序，并非比赛题目顺序
    </li>
    <li>
        本篇中所有的“更好的优化”均为标准答案之外的思考，不使用此内容也可以通过题目
    </li>
  </ul>
</div>

<h1 id="比赛预期情况"><a href="#比赛预期情况" class="headerlink" title="比赛预期情况"></a>比赛预期情况</h1><p>总共比赛人数：175 (至少通过一道题的人数，没有通过题的不计入总人数)</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">题目名</th>
<th style="text-align:center">实际通过次数</th>
<th style="text-align:center">实际通过比例</th>
<th style="text-align:center">预期通过比例</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">chiking 的偶像</td>
<td style="text-align:center">172</td>
<td style="text-align:center">98.3%</td>
<td style="text-align:center">100%</td>
</tr>
<tr>
<td style="text-align:center">chiking 和珂朵莉</td>
<td style="text-align:center">141</td>
<td style="text-align:center">80.6%</td>
<td style="text-align:center">80%</td>
</tr>
<tr>
<td style="text-align:center">chiking 的序列 II</td>
<td style="text-align:center">58</td>
<td style="text-align:center">51.3%</td>
<td style="text-align:center">60%</td>
</tr>
<tr>
<td style="text-align:center">chiking 的序列 I</td>
<td style="text-align:center">113</td>
<td style="text-align:center">64.6%</td>
<td style="text-align:center">50%</td>
</tr>
<tr>
<td style="text-align:center">chiking 的棋盘</td>
<td style="text-align:center">2</td>
<td style="text-align:center">1.1%</td>
<td style="text-align:center">30%</td>
</tr>
<tr>
<td style="text-align:center">乐于助人的 chiking</td>
<td style="text-align:center">24</td>
<td style="text-align:center">13.7%</td>
<td style="text-align:center">20%</td>
</tr>
<tr>
<td style="text-align:center">chiking 的俄罗斯方块</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0%</td>
<td style="text-align:center">1%</td>
</tr>
<tr>
<td style="text-align:center">chiking 和大家一起来做签到题</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0%</td>
<td style="text-align:center">1%</td>
</tr>
<tr>
<td style="text-align:center">chiking 是一个机器人</td>
<td style="text-align:center">0</td>
<td style="text-align:center">0%</td>
<td style="text-align:center">1%</td>
</tr>
</tbody>
</table>
</div>
<p>综上来看，整个新生赛除了一道题没有达到预期的成绩，其他题目均与预期相差不大</p>
<h1 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h1><h2 id="chiking-的偶像"><a href="#chiking-的偶像" class="headerlink" title="chiking 的偶像"></a>chiking 的偶像</h2><h3 id="大致题意"><a href="#大致题意" class="headerlink" title="大致题意"></a>大致题意</h3><p>循环输出 <code>\soup_god/</code>，且总共输出的字符串长度为 $n$</p>
<h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>简单的签到题，只需要还记得有 mod 这个运算就能写出来</p>
<h3 id="AC-Code"><a href="#AC-Code" class="headerlink" title="AC Code"></a>AC Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *data = <span class="hljs-string">&quot;\\soup_god/&quot;</span>;<br>    <span class="hljs-keyword">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; data[i % <span class="hljs-number">10</span>];<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="吐槽"><a href="#吐槽" class="headerlink" title="吐槽"></a>吐槽</h3><p>我以为大家被卡在不会 <code>mod</code>，结果大家都卡在 <code>\\</code>，这就挺尴尬的</p>
<h2 id="chiking-和珂朵莉"><a href="#chiking-和珂朵莉" class="headerlink" title="chiking 和珂朵莉"></a>chiking 和珂朵莉</h2><h3 id="大致题意-1"><a href="#大致题意-1" class="headerlink" title="大致题意"></a>大致题意</h3><p>$n$ 个物品，每个物品都有价值和所属类别，让你选择 $n - k$ 种类别的物品，使得所选出来的这些类别的物品的总价值最大</p>
<h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>也是签到题之一</p>
<p>在读入数据的时候统计每个类别的物品价值只和，之后排序一下，取出后 $n - k$ 个类别的价值即可</p>
<h3 id="AC-Code-1"><a href="#AC-Code-1" class="headerlink" title="AC Code"></a>AC Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> w[<span class="hljs-number">11</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br>    <span class="hljs-keyword">int</span> m, n, k;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; m &gt;&gt; n &gt;&gt; k;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i) &#123;<br>        <span class="hljs-keyword">int</span> d, s;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; d &gt;&gt; s;<br>        w[s] += d;<br>    &#125;<br>    sort(w + <span class="hljs-number">1</span>, w + n + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = k + <span class="hljs-number">1</span>; i &lt;= n; ++i) ans += w[i];<br>    <span class="hljs-built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="吐槽-1"><a href="#吐槽-1" class="headerlink" title="吐槽"></a>吐槽</h3><p>这道题原来有一个小坑点，即物品的价值可以为负数，所以需要额外增加一个判断，但是想了想还是当签到题，不要故意恶心了，于是就删掉了。所以顺便好奇的问一下，有多少人看到题面之后去想过价值是不是可能为负数呢</p>
<h2 id="chiking-的序列-II"><a href="#chiking-的序列-II" class="headerlink" title="chiking 的序列 II"></a>chiking 的序列 II</h2><h3 id="大致题意-2"><a href="#大致题意-2" class="headerlink" title="大致题意"></a>大致题意</h3><p>有一个<strong>非递减</strong>的数组，允许你进行任意次数操作，每次操作可以使得其中一个值增加 $1$，问至少需要多少次操作才能使得数组内没有相同的值</p>
<h3 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h3><p>因为只能进行加法运算，所以数字只会增加，由于已经排序好了数组，所以最简单的方案就是让每一个值都比前一个值要大即可</p>
<h3 id="AC-Code-2"><a href="#AC-Code-2" class="headerlink" title="AC Code"></a>AC Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">data</span><span class="hljs-params">(n)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) <span class="hljs-built_in">cin</span> &gt;&gt; data[i];<br>    <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">int</span> tmp = max(data[i - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>, data[i]);<br>        sum += tmp - data[i];<br>        data[i] = tmp;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; sum &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="chiking-的序列-I"><a href="#chiking-的序列-I" class="headerlink" title="chiking 的序列 I"></a>chiking 的序列 I</h2><h3 id="大致题意-3"><a href="#大致题意-3" class="headerlink" title="大致题意"></a>大致题意</h3><p>有一个数组，允许你进行任意次操作，每次执行操作可以将任意一个数字插入到数组到任意位置，问至少需要多少次操作才能使得数组内到每一个值满足 $a_i \leq i$，其中 $i$ 表示下标</p>
<h3 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h3><p>首先要让每一位的的数字小于等于其下标，那么插入的数字也不能例外。由于插入的数字可以是任意值，所以理所应当的，选择 $1$ 进行插入是最好的选择，因为无论插入何处均可以使得新插入的数字不再需要考虑</p>
<p>接下来是考虑插入位置的问题，在等式中 $a_i$ 是不可更新的值，所以只能想办法使得 $i$ 增大，那么最容易得到的解决方案就是将数字插入数组开头，这会使得所有原来在数组内的值的下标都增大，最大程度的满足条件</p>
<p>接下来考虑插入数量的问题，由于都是插入数组最前面，所以可以将等式改写为 $a_i &lt;= i + x$，其中的 $x$ 即为需要求解的值。那么对于每一个 $i$ 都要满足这个等式，所以遍历一次数组，找出最大的需要的 $x$ 即可</p>
<h3 id="AC-Code-3"><a href="#AC-Code-3" class="headerlink" title="AC Code"></a>AC Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> _;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; _;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> ts = <span class="hljs-number">0</span>; ts &lt; _; ++ts) &#123;<br>        <span class="hljs-keyword">int</span> n;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>        <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>            <span class="hljs-keyword">int</span> tmp;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; tmp;<br>            ans = max(ans, tmp - i - <span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="chiking-的棋盘"><a href="#chiking-的棋盘" class="headerlink" title="chiking 的棋盘"></a>chiking 的棋盘</h2><h3 id="大致题意-4"><a href="#大致题意-4" class="headerlink" title="大致题意"></a>大致题意</h3><p>用 $k$ 个 <code>L</code> 形状的方块能否平铺一个矩形方格</p>
<h3 id="思路-4"><a href="#思路-4" class="headerlink" title="思路"></a>思路</h3><p>我们可以用 <code>L</code> 形状的方块拼出如下两种最简平铺方案</p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/2*4.png" srcset="/img/loading.gif" alt="2-4"></p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/3*8.png" srcset="/img/loading.gif" alt="3-8"></p>
<p>这两个方案都是 $8$ 个方格的倍数，所以起码，方格总数应该是 $8$ 的倍数，即 $n \times m = 8k$</p>
<ol>
<li>假设两边都是偶数，那么必然其中一边为 $2$ 的倍数，另外一边为 $4$ 的倍数，所以必然可以被仅靠第一种平铺方案平铺</li>
<li>假设一边为奇数一边是偶数，那么必然其中一边为 $8$ 的倍数，而第一种方案也可以改写为 $2 * 8$ 的方格，即只需要另外一边可以分解为 $2x + 3y$ 的形式即可，易得只要 $ \geq 2$ 的值均可</li>
</ol>
<p>所以结论：只要满足方格数为 $8$ 的倍数，且两边都 $ \geq 2$，则必定可以平铺</p>
<p>接下来只需要计算数量对不对就行</p>
<h3 id="AC-Code-4"><a href="#AC-Code-4" class="headerlink" title="AC Code"></a>AC Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> int long long</span><br>    <span class="hljs-keyword">int</span> _;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; _;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> ts = <span class="hljs-number">0</span>; ts &lt; _; ++ts) &#123;<br>        <span class="hljs-keyword">int</span> n, m, k;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; k;<br>        <span class="hljs-keyword">if</span> (n &gt; <span class="hljs-number">1</span> &amp;&amp; m &gt; <span class="hljs-number">1</span> &amp;&amp; (n * m) % <span class="hljs-number">8</span> == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">int</span> cnt = (n * m / <span class="hljs-number">4</span>);<br>            <span class="hljs-keyword">if</span> (cnt == k) <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Perfect!\n&quot;</span>;<br>            <span class="hljs-keyword">else</span> <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Single forever!\n&quot;</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;Single forever!\n&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="乐于助人的-chiking"><a href="#乐于助人的-chiking" class="headerlink" title="乐于助人的 chiking"></a>乐于助人的 chiking</h2><h3 id="大致题意-5"><a href="#大致题意-5" class="headerlink" title="大致题意"></a>大致题意</h3><p>允许将字符串中 <code>oo</code> 和 <code>u</code> 互转，也允许将字符串的 <code>kh</code> 和 <code>h</code> 互转的前提下，计算给出的字符串数组中有几个不同的字符串</p>
<h3 id="思路-5"><a href="#思路-5" class="headerlink" title="思路"></a>思路</h3><p>由于存在转换，所以最好的办法就是统一转为一种类型，再进行比较</p>
<p><code>oo</code> 和 <code>u</code> 这对规则，若我们将所有的 <code>oo</code> 转为 <code>u</code>，那么当遇到 <code>ou</code> 和 <code>uo</code> 时，会发现在此条规则下应该是相等的字符串没有相等。所以应该将所有的 <code>u</code> 字符转为 <code>oo</code></p>
<p><code>kh</code> 和 <code>h</code> 这对规则，若我们将所有的 <code>h</code> 转为 <code>kh</code>，那么就会出现 <code>kh</code> 还可以继续转为 <code>kkh</code>、<code>kkkh</code>、<code>kkkkh</code> 等，所以只能选择将 <code>kh</code> 转为 <code>h</code>。但是请注意 <code>kkkh</code> 这类连续的 <code>k</code> 的情况，可以连续多次转换</p>
<p>处理完成后，统计不同的字符串的数量即可</p>
<p>处理字符串复杂度 $O(nm) = 1e5$<br>统计不同字符串数量 $O(n^2m) = 1e7$</p>
<p>满足要求</p>
<h3 id="AC-Code-5"><a href="#AC-Code-5" class="headerlink" title="AC Code"></a>AC Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">char</span> a[<span class="hljs-number">1010</span>], b[<span class="hljs-number">2010</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">string</span>&gt; data;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; a;<br>        <span class="hljs-keyword">int</span> len = (<span class="hljs-keyword">int</span>) <span class="hljs-built_in">strlen</span>(a);<br>        <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; len; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (a[j] == <span class="hljs-string">&#x27;u&#x27;</span>) &#123;<br>                b[pos++] = <span class="hljs-string">&#x27;o&#x27;</span>;<br>                b[pos++] = <span class="hljs-string">&#x27;o&#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[j] == <span class="hljs-string">&#x27;h&#x27;</span>) &#123;<br>                <span class="hljs-keyword">while</span> (pos &gt; <span class="hljs-number">0</span> &amp;&amp; b[pos - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;k&#x27;</span>) pos--;<br>                b[pos++] = <span class="hljs-string">&#x27;h&#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                b[pos++] = a[j];<br>            &#125;<br>            b[pos] = <span class="hljs-number">0</span>;<br>        &#125;<br>        data.emplace_back(b);<br>    &#125;<br>    <span class="hljs-keyword">int</span> cnt = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n - <span class="hljs-number">1</span>; ++i) &#123;<br>        <span class="hljs-keyword">bool</span> flag = <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i + <span class="hljs-number">1</span>; j &lt; n; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (data[i] == data[j]) &#123;<br>                flag = <span class="hljs-literal">false</span>;<br>                <span class="hljs-keyword">break</span>;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (flag) cnt++;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; cnt + <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="更好的优化"><a href="#更好的优化" class="headerlink" title="更好的优化"></a>更好的优化</h3><p>实际上，这里需要比较的是字符串是否相同，所以可以使用字符串 hash 来解决，这样，复杂度将会降低至 $O(nm)$。当然，字符串 hash 存在一定的可能错误的隐患，但是可以通过增加多组 hash 来解决</p>
<h3 id="Better-Code"><a href="#Better-Code" class="headerlink" title="Better Code"></a>Better Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">char</span> a[<span class="hljs-number">1010</span>], b[<span class="hljs-number">2010</span>];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span>&gt; hashCode;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; a;<br>        <span class="hljs-keyword">int</span> len = (<span class="hljs-keyword">int</span>) <span class="hljs-built_in">strlen</span>(a);<br>        <span class="hljs-keyword">int</span> pos = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; len; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (a[j] == <span class="hljs-string">&#x27;u&#x27;</span>) &#123;<br>                b[pos++] = <span class="hljs-string">&#x27;o&#x27;</span>;<br>                b[pos++] = <span class="hljs-string">&#x27;o&#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (a[j] == <span class="hljs-string">&#x27;h&#x27;</span>) &#123;<br>                <span class="hljs-keyword">while</span> (pos &gt; <span class="hljs-number">0</span> &amp;&amp; b[pos - <span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;k&#x27;</span>) pos--;<br>                b[pos++] = <span class="hljs-string">&#x27;h&#x27;</span>;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                b[pos++] = a[j];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> code = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">const</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> p = <span class="hljs-number">131</span>, m = <span class="hljs-number">1e9</span>+<span class="hljs-number">7</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; pos; ++j) &#123;<br>            code *= p;<br>            code %= m;<br>            code += b[j];<br>            code %= m;<br>        &#125;<br>        hashCode.insert(code);<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; hashCode.size() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="chiking-的俄罗斯方块"><a href="#chiking-的俄罗斯方块" class="headerlink" title="chiking 的俄罗斯方块"></a>chiking 的俄罗斯方块</h2><h3 id="大致题意-6"><a href="#大致题意-6" class="headerlink" title="大致题意"></a>大致题意</h3><p>宽度为 4 的俄罗斯方块游戏，仅有两种方块：<script type="math/tex">2 \times 2</script> 的方块和 <script type="math/tex">1 \times 4</script> 的长条，在已知所有的下落顺序的情况下，求出最优的分数</p>
<h3 id="思路-6"><a href="#思路-6" class="headerlink" title="思路"></a>思路</h3><p>需要思考的东西比较多，我们先来证明一些东西，方面后面使用</p>
<h4 id="实际上仅会出现-10-分和-3-分两种消方块"><a href="#实际上仅会出现-10-分和-3-分两种消方块" class="headerlink" title="实际上仅会出现 10 分和 3 分两种消方块"></a>实际上仅会出现 10 分和 3 分两种消方块</h4><p>这个结论应该是比较简单就可以得出的，因为垂直方向上只有长度为 2 和 4 的方块，所以当我们能遇到创造出 10 分的情况，尽快消除绝对不会亏</p>
<h4 id="长条方块必定可以合并视为-2-times-4"><a href="#长条方块必定可以合并视为-2-times-4" class="headerlink" title="长条方块必定可以合并视为 2 \times 4"></a>长条方块必定可以合并视为 <script type="math/tex">2 \times 4</script></h4><p>这个结论指的是如下的情况是不可能发生的(带箭头的蓝色方块是最后落下的)</p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/Tetris-cannot-be-inserted.png" srcset="/img/loading.gif" alt="Tetris-cannot be inserted"></p>
<p>因为这个情况下，才会出现 <script type="math/tex">1 \times 4</script> 无法插入到原来的 <script type="math/tex">1 \times 4</script> 中使得变成 <script type="math/tex">2 \times 4</script></p>
<p>而这个情况恰好满足一个 10 分的消除情况，即下图</p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/10-1.png" srcset="/img/loading.gif" alt="10-1"></p>
<p>既然能创造 10 分，那么就没必要纠结是不是能够合并了，先变成 10 分重要，所以不存在单独一根的长条方块的情况</p>
<h4 id="将-2-2-放中间一定不是好的选择"><a href="#将-2-2-放中间一定不是好的选择" class="headerlink" title="将 2*2 放中间一定不是好的选择"></a>将 2*2 放中间一定不是好的选择</h4><p>这个结论应该显而易见吧，因为放左/右边既可以与 <script type="math/tex">1 \times 4</script> 消分，还可以与 <script type="math/tex">2 \times 2</script> 消分，比放中间肯定更优</p>
<h4 id="原来的结构不影响当前期望的分数"><a href="#原来的结构不影响当前期望的分数" class="headerlink" title="原来的结构不影响当前期望的分数"></a>原来的结构不影响当前期望的分数</h4><p>这句话扩展起来就是</p>
<blockquote>
<p>不管之前的方块带来什么影响，若接下来 n 个方块能够创造 10 分的价值，则一定可以创造 10 分的价值，若接下来 n 个方块能创建 3 分的价值，则一定可以创造 3 分的价值</p>
</blockquote>
<p>这一条暂且先不证明</p>
<h4 id="所有组合如下"><a href="#所有组合如下" class="headerlink" title="所有组合如下"></a>所有组合如下</h4><p>所有能够拿分的组合只有下面这些，其中只有前两个是 10 分，其他的均为 3 分</p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/10-1.png" srcset="/img/loading.gif" alt="10-1"></p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/10-2.png" srcset="/img/loading.gif" alt="10-2"></p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/3-1.png" srcset="/img/loading.gif" alt="3-1"></p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/3-2.png" srcset="/img/loading.gif" alt="3-2"></p>
<p>接下来我们可以证明上面那条的结论</p>
<p>之前方块带来的影响主要是由于其必须要先落下导致占用了一定的位置，使得原来可以消掉的方块没有办法继续消除</p>
<p>最常见的一个影响就是 <script type="math/tex">2 \times 2</script> 影响，简单来说就是原来已经有一块 <script type="math/tex">2 \times 2</script> 方格，此时就不一定能够做到满足上述的消分情况，如下图</p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/2-2-block.png" srcset="/img/loading.gif" alt="2-2-block.jpeg"></p>
<p>例如此时，其实无法完美的满足第二种 10 分的消分情况，因为你不可能将四个 <script type="math/tex">1 \times 4</script> 放在同一行中，即同时下落四个 <script type="math/tex">1 \times 4</script> 的方块时，你不能仅通过这四个方块得到 10 分</p>
<p>但是又如何呢？</p>
<p>实际上我们仍然可以拿到 10 分，而且最后剩下的结果仍然是 <script type="math/tex">2 \times 2</script>方块，如下图所示</p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/2-2-block-solve.png" srcset="/img/loading.gif" alt="2-2-block-solve"></p>
<p>这里就不再详细介绍每种情况了，供各位思考在 <script type="math/tex">2 \times 2</script> 的影响下，四种得分方案是否都可以得到原来的分数且不带来新的影响</p>
<p>还有一种影响是 <script type="math/tex">2 \times 4</script> 的，比较类似，不再详细说明了</p>
<p>特别的，无论在 <script type="math/tex">2 \times 2</script> 还是 <script type="math/tex">2 \times 4</script> 的影响下，第三种得分方案都有可能会从 3 分变成 10 分，而这虽然增加了分数，但是同时也增加了难于预料的问题，必须予以解决。有趣的是，这种新的得分方案，其实正是第一种方案，所以如果我们能够优先将所有可能的第一种方案计算完，那么此情况其实不再可能出现，那么也就可以忽略了</p>
<p>除了 <script type="math/tex">2 \times 2</script> 还是 <script type="math/tex">2 \times 4</script>，还有更多的可能，例如更高的 <script type="math/tex">2 \times 8</script> 等等，但实际上是类似的，也就不再需要证明</p>
<p>当然还有更加离谱的影响，例如 <script type="math/tex">1 \times 4</script>影响，明显，这个影响确实真的影响到得分了，因为第四种得分方案压根不可能得分了，如下图</p>
<p><img src="/image/acm/2021-ZJGSU-ACM-freshman-competition/1-4-block-solve.png" srcset="/img/loading.gif" alt="1-4-block-solve"></p>
<p>但是，注意题目中说的 <script type="math/tex">1 \times 4</script> 一定是偶数个，所以之后必定有一个 <script type="math/tex">1 \times 4</script>，那么就回到了开头的那个结论的情况，这里又可以拿到 10 分了</p>
<h4 id="穿插组合并无影响"><a href="#穿插组合并无影响" class="headerlink" title="穿插组合并无影响"></a>穿插组合并无影响</h4><p>简单来说就是两个结构需要的方块穿插起来，并不会影响最终的得分，这里就不再详细介绍</p>
<p>当你证明完成后接下来就是模拟讨论所有情况即可</p>
<p>注意第一种 10 分，其要求最后一个落下的必须是 <script type="math/tex">1 \times 4</script> 的长条即可，剩下的，统计数量就行</p>
<h3 id="AC-Code-6"><a href="#AC-Code-6" class="headerlink" title="AC Code"></a>AC Code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    <span class="hljs-keyword">int</span> tot0 = <span class="hljs-number">0</span>, cnt0 = <span class="hljs-number">0</span>, cnt1 = <span class="hljs-number">0</span>, ans = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">int</span> tmp;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; tmp;<br>        <span class="hljs-keyword">if</span> (tmp == <span class="hljs-number">1</span>) &#123;<br>            cnt1++;<br>            <span class="hljs-keyword">if</span> (cnt1 &gt;= <span class="hljs-number">2</span> &amp;&amp; cnt0 &gt;= <span class="hljs-number">2</span>) &#123;<br>                cnt1 -= <span class="hljs-number">2</span>;<br>                cnt0 -= <span class="hljs-number">2</span>;<br>                ans += <span class="hljs-number">10</span>;<br>            &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            tot0++;<br>            cnt0++;<br>        &#125;<br>    &#125;<br>    ans += (cnt1 / <span class="hljs-number">4</span>) * <span class="hljs-number">10</span>;<br>    cnt1 &amp;= <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">if</span> (tot0 &gt;= <span class="hljs-number">2</span>) &#123;<br>        ans += (cnt0 + cnt1) / <span class="hljs-number">2</span> * <span class="hljs-number">3</span>;<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (cnt0 &amp;&amp; cnt1) &#123;<br>        ans += <span class="hljs-number">3</span>;<br>    &#125;<br>    <span class="hljs-built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="chiking-和大家一起来做签到题"><a href="#chiking-和大家一起来做签到题" class="headerlink" title="chiking 和大家一起来做签到题"></a>chiking 和大家一起来做签到题</h2><h3 id="大致题意-7"><a href="#大致题意-7" class="headerlink" title="大致题意"></a>大致题意</h3><p>给定一个 n，允许使用加减乘除和任意括号，找出有多少种不同的四个数字，使得这四个数字能够运算出 n，且运算过程中一定出现了小数，罗列所有的可能的四个数字的组合</p>
<h3 id="思路-7"><a href="#思路-7" class="headerlink" title="思路"></a>思路</h3><p>其实就是一道暴力题</p>
<p>算一下复杂度，<script type="math/tex">13^4 / 2 * 4! * 2 * 3^6 = 499,703,256</script></p>
<p>解释一下，罗列每个位置的每个可能，为 $\rightarrow 13^4 / 2$ （避免重复，遍历过程保证前一个值不大于当前值）</p>
<p>排列数组 $\rightarrow 4!$</p>
<p>总共有两种括号方式 $((A @ B) @ C) @ D$ 和 $(A @ B) @ (C @ D)$（$ABCD$ 为数字，$@$ 为运算符号），所以 $\rightarrow 2$</p>
<p>枚举所有的运算符号 $\rightarrow 3^6$（6 种运算分别为 $A + B, A - B, B - A, A \times B, A \div B, B \div A$）</p>
<p>做一下剪枝，很容易提前放弃掉部分方案，复杂度还可以降低</p>
<p>所以直接暴力就行</p>
<p>但是，如何优雅的暴力呢？</p>
<h3 id="AC-code"><a href="#AC-code" class="headerlink" title="AC code"></a>AC code</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">double</span> eps = <span class="hljs-number">1e-6</span>;<br><br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br><br>    <span class="hljs-keyword">int</span> m;<br>    <span class="hljs-built_in">set</span>&lt;<span class="hljs-keyword">int</span>&gt; ans;<br>    <span class="hljs-keyword">int</span> curValue[<span class="hljs-number">4</span>];<br>    <span class="hljs-built_in">cin</span> &gt;&gt; m;<br><br>    <span class="hljs-keyword">auto</span> isM = [&amp;](<span class="hljs-keyword">double</span> cur) &#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(cur - m) &lt; eps; &#125;;<br>    <span class="hljs-keyword">auto</span> isDouble = [&amp;](<span class="hljs-keyword">double</span> cur) &#123; <span class="hljs-keyword">return</span> <span class="hljs-built_in">abs</span>(cur - <span class="hljs-keyword">int</span>(cur + eps)) &gt; eps; &#125;;<br><br>    <span class="hljs-keyword">auto</span> add = [](<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b) &#123; <span class="hljs-keyword">return</span> a + b; &#125;;<br>    <span class="hljs-keyword">auto</span> sub1 = [](<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b) &#123; <span class="hljs-keyword">return</span> a - b; &#125;;<br>    <span class="hljs-keyword">auto</span> sub2 = [](<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b) &#123; <span class="hljs-keyword">return</span> b - a; &#125;;<br>    <span class="hljs-keyword">auto</span> times = [](<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b) &#123; <span class="hljs-keyword">return</span> a * b; &#125;;<br>    <span class="hljs-keyword">auto</span> div1 = [](<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b) &#123; <span class="hljs-keyword">return</span> a / b; &#125;;<br>    <span class="hljs-keyword">auto</span> div2 = [](<span class="hljs-keyword">double</span> a, <span class="hljs-keyword">double</span> b) &#123; <span class="hljs-keyword">return</span> b / a; &#125;;<br><br>    function&lt;<span class="hljs-keyword">double</span>(<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>)&gt; arr[<span class="hljs-number">6</span>] = &#123;add, sub1, sub2, times, div1, div2&#125;;<br><br>    <span class="hljs-keyword">auto</span> cal = [&amp;]() &#123;<br>        <span class="hljs-keyword">bool</span> reach = <span class="hljs-literal">false</span>, hasNoDouble = <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">do</span> &#123;<br><br>            function&lt;<span class="hljs-keyword">bool</span>(<span class="hljs-keyword">double</span>, <span class="hljs-keyword">int</span>, <span class="hljs-keyword">bool</span>)&gt; dfs1 = [&amp;](<span class="hljs-keyword">double</span> cur, <span class="hljs-keyword">int</span> deep, <span class="hljs-keyword">bool</span> hasDouble) &#123;<br>                <span class="hljs-keyword">if</span> (deep == <span class="hljs-number">4</span>) &#123;<br>                    <span class="hljs-keyword">if</span> (isM(cur)) &#123;<br>                        reach = <span class="hljs-literal">true</span>;<br>                        <span class="hljs-keyword">if</span> (!hasDouble) &#123;<br>                            hasNoDouble = <span class="hljs-literal">true</span>;<br>                            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                        &#125;<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>                &#125;<br><br>                <span class="hljs-keyword">return</span> all_of(arr, arr + <span class="hljs-number">6</span>, [&amp;](function&lt;<span class="hljs-keyword">double</span>(<span class="hljs-keyword">double</span>, <span class="hljs-keyword">double</span>)&gt; &amp;func) &#123;<br>                    <span class="hljs-keyword">double</span> nxt = func(cur, curValue[deep]);<br>                    <span class="hljs-keyword">return</span> dfs1(nxt, deep + <span class="hljs-number">1</span>, hasDouble || isDouble(nxt));<br>                &#125;);<br>            &#125;;<br>            function&lt;<span class="hljs-keyword">bool</span>()&gt; dfs2 = [&amp;]() &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;i: arr) &#123;<br>                    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;j: arr) &#123;<br>                        <span class="hljs-keyword">double</span> l = i(curValue[<span class="hljs-number">0</span>], curValue[<span class="hljs-number">1</span>]);<br>                        <span class="hljs-keyword">double</span> r = j(curValue[<span class="hljs-number">2</span>], curValue[<span class="hljs-number">3</span>]);<br>                        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;k: arr) &#123;<br>                            <span class="hljs-keyword">double</span> t = k(l, r);<br>                            <span class="hljs-keyword">if</span> (isM(t)) &#123;<br>                                reach = <span class="hljs-literal">true</span>;<br>                                <span class="hljs-keyword">if</span> (!isDouble(l) &amp;&amp; !isDouble(r)) &#123;<br>                                    hasNoDouble = <span class="hljs-literal">true</span>;<br>                                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>                                &#125;<br>                            &#125;<br>                        &#125;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>            &#125;;<br><br>            dfs1(curValue[<span class="hljs-number">0</span>], <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);<br>            dfs2();<br><br>        &#125; <span class="hljs-keyword">while</span> (next_permutation(curValue, curValue + <span class="hljs-number">4</span>));<br><br>        <span class="hljs-keyword">if</span> (reach &amp;&amp; !hasNoDouble) &#123;<br>            <span class="hljs-comment">// 四个小于 16 的 int 数字，可以按位压缩到一个 int 中</span><br>            <span class="hljs-keyword">int</span> t = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;item: curValue) &#123;<br>                t &lt;&lt;= <span class="hljs-number">4</span>;<br>                t += item;<br>            &#125;<br>            ans.insert(t);<br>        &#125;<br>    &#125;;<br><br>    <span class="hljs-comment">// 暴力枚举没有必要一定要用 dfs，实际上 for 也可以，甚至更快，因为减少了出入栈的耗时</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">13</span>; ++i) &#123;<br>        curValue[<span class="hljs-number">0</span>] = i + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = i; j &lt; <span class="hljs-number">13</span>; ++j) &#123;<br>            curValue[<span class="hljs-number">1</span>] = j + <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> k = j; k &lt; <span class="hljs-number">13</span>; ++k) &#123;<br>                curValue[<span class="hljs-number">2</span>] = k + <span class="hljs-number">1</span>;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> l = k; l &lt; <span class="hljs-number">13</span>; ++l) &#123;<br>                    curValue[<span class="hljs-number">3</span>] = l + <span class="hljs-number">1</span>;<br>                    cal();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-built_in">cout</span> &lt;&lt; ans.size() &lt;&lt; <span class="hljs-built_in">endl</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;item: ans) &#123;<br>        <span class="hljs-keyword">int</span> cur = item;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">3</span>; i &gt;= <span class="hljs-number">0</span>; --i) &#123;<br>            curValue[i] = cur % <span class="hljs-number">16</span>;<br>            cur &gt;&gt;= <span class="hljs-number">4</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; ++i)<br>            <span class="hljs-built_in">cout</span> &lt;&lt; curValue[i] &lt;&lt; <span class="hljs-string">&quot; \n&quot;</span>[i == <span class="hljs-number">3</span>];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="chiking-是一个机器人"><a href="#chiking-是一个机器人" class="headerlink" title="chiking 是一个机器人"></a>chiking 是一个机器人</h2><h3 id="大致题意-8"><a href="#大致题意-8" class="headerlink" title="大致题意"></a>大致题意</h3><p>有一个地图，有障碍物，三种不同的机器，一个只能下，一个只能右，最后那个可以下右移动，询问 q 次某种机器能否从起始点到终点</p>
<h3 id="思路-8"><a href="#思路-8" class="headerlink" title="思路"></a>思路</h3><p>考虑前两种机器，其实很好解决，以第一种机器举例，我将整个地图的第一行加到第二行，此时的第二行加到第三行，如此操作后，每个点上保存的是此点的正上方有多少个墙，称其为“前缀墙”。若起点和终点的点的“前缀墙”数量相同，则就可以到达，否则中间必定存在墙</p>
<p>第二种机器就不再过多介绍了</p>
<p>第三种机器则比较难做，考虑一种 dp 的可能：若这个点不是墙，则可以到达这个点的所有点，是能够到达这个点上方点的所有点和能够到达这个点左边的所有点的并集。用公式描述一下就是</p>
<script type="math/tex; mode=display">
\begin{equation}
    dp[i][j] =
    \begin{cases}
        dp[i][j - 1] \cup dp[i - 1][j] \cup \{(i, j)\}, & \text{如果当前节点可达 } \\
        空集合, & \text{如果当前节点不可达 }
    \end{cases}
\end{equation}</script><p>如此计算我们可以得到第一份代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-keyword">int</span> x1, y1, x2, y2, i;<br><br>    <span class="hljs-keyword">bool</span> <span class="hljs-keyword">operator</span>&lt;(<span class="hljs-keyword">const</span> Node &amp;rhs) <span class="hljs-keyword">const</span> &#123;<br>        <span class="hljs-keyword">return</span> x2 &lt; rhs.x2;<br>    &#125;<br>&#125;;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> N = <span class="hljs-number">510</span>;<br>    <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> M = <span class="hljs-number">510</span>;<br><br>    <span class="hljs-comment">// 读取地图</span><br>    <span class="hljs-keyword">int</span> n, m;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">bitset</span>&lt;M&gt;&gt; graph(n);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; m; ++j) &#123;<br>            <span class="hljs-keyword">char</span> c;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; c;<br>            graph[i][j] = c == <span class="hljs-string">&#x27;0&#x27;</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 前缀和解决 1 和 2 型号的</span><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&gt; modelList[<span class="hljs-number">2</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;model: modelList) &#123;<br>        model.resize(n);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;item: model)<br>            item.resize(m, <span class="hljs-number">0</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; m; ++j) &#123;<br>            modelList[<span class="hljs-number">0</span>][i][j] = (i != <span class="hljs-number">0</span> ? modelList[<span class="hljs-number">0</span>][i - <span class="hljs-number">1</span>][j] : <span class="hljs-number">0</span>) + !graph[i][j];<br>            modelList[<span class="hljs-number">1</span>][i][j] = (j != <span class="hljs-number">0</span> ? modelList[<span class="hljs-number">1</span>][i][j - <span class="hljs-number">1</span>] : <span class="hljs-number">0</span>) + !graph[i][j];<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">int</span> q;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; q;<br>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">bool</span>&gt; <span class="hljs-title">ans</span><span class="hljs-params">(q)</span></span>;    <span class="hljs-comment">// 离线计算答案</span><br>    <span class="hljs-built_in">vector</span>&lt;Node&gt; query;<br>    query.reserve(q);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; q; ++i) &#123;<br>        <span class="hljs-keyword">int</span> t, x1, y1, x2, y2;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; t &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;<br>        <span class="hljs-comment">// 下标从 0 开始</span><br>        x1 -= <span class="hljs-number">1</span>;<br>        y1 -= <span class="hljs-number">1</span>;<br>        x2 -= <span class="hljs-number">1</span>;<br>        y2 -= <span class="hljs-number">1</span>;<br><br>        <span class="hljs-keyword">if</span> (t == <span class="hljs-number">1</span>) ans[i] = (y1 == y2) <span class="hljs-keyword">and</span> (x1 &lt;= x2) <span class="hljs-keyword">and</span> (modelList[<span class="hljs-number">0</span>][x1][y1] == modelList[<span class="hljs-number">0</span>][x2][y2]);<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t == <span class="hljs-number">2</span>) ans[i] = (x1 == x2) <span class="hljs-keyword">and</span> (y1 &lt;= y2) <span class="hljs-keyword">and</span> modelList[<span class="hljs-number">1</span>][x1][y1] == modelList[<span class="hljs-number">1</span>][x2][y2];<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">if</span> (x1 &gt; x2 || y1 &gt; y2) ans[i] = <span class="hljs-literal">false</span>;<br>            <span class="hljs-keyword">else</span> query.push_back((Node) &#123;x1, y1, x2, y2, i&#125;);<br>        &#125;<br>    &#125;<br><br>    sort(query.begin(), query.end());<br><br>    <span class="hljs-keyword">auto</span> hashNode = [&amp;](<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> &amp;x, <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> &amp;y) &#123;<br>        <span class="hljs-keyword">return</span> x * n + y;<br>    &#125;;<br><br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">bitset</span>&lt;N * M&gt;&gt; dp(m);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; ++i) &#123;<br>        dp[i].reset();<br>        dp[i][hashNode(<span class="hljs-number">0</span>, i)] = graph[<span class="hljs-number">0</span>][i];<br>    &#125;<br><br>    <span class="hljs-keyword">int</span> curQuery = <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-comment">// 离线计算每个位置哪些可以到达</span><br>        <span class="hljs-keyword">if</span> (!graph[i][<span class="hljs-number">0</span>]) dp[<span class="hljs-number">0</span>].reset();<br>        <span class="hljs-keyword">else</span> dp[<span class="hljs-number">0</span>][hashNode(i, <span class="hljs-number">0</span>)] = <span class="hljs-literal">true</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt; m; ++j) &#123;<br>            <span class="hljs-keyword">if</span> (!graph[i][j]) dp[j].reset();<br>            <span class="hljs-keyword">else</span> &#123;<br>                dp[j][hashNode(i, j)] = <span class="hljs-literal">true</span>;<br>                dp[j] |= dp[j - <span class="hljs-number">1</span>];<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">while</span> (curQuery &lt; query.size()) &#123;<br>            <span class="hljs-keyword">if</span> (query[curQuery].x2 == i) &#123;<br>                ans[query[curQuery].i] = dp[query[curQuery].y2][hashNode(query[curQuery].x1, query[curQuery].y1)];<br>                curQuery++;<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">break</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; q; ++i)<br>        <span class="hljs-built_in">cout</span> &lt;&lt; (ans[i] ? <span class="hljs-string">&quot;yes&quot;</span> : <span class="hljs-string">&quot;no&quot;</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>让我们计算一下复杂度: $O(n^4) = 500^4 = 62,500,000,000$，这肯定不行，就算压位也不能通过</p>
<p>所以需要优化</p>
<p>问题出在需要计算所有的点可达问题，这就导致了计算一个节点就需要 $O(n^2)$ 的时间，非常不合理</p>
<p>如果试图减少一个 $n$，那么我们只能计算能否到达某一行或者某一列的值，而不能计算全部</p>
<p>但是考虑双向，如果我们知道出发点能够到达某个节点。而目标点可以来自同一个点，那么也同样可以说明可以到达</p>
<p>所以这个特殊的一行或者一列将地图分为两半，同时若询问是跨立在这一行或者这一列，则可以回答，但是对于没有跨立的如何解决？</p>
<p style="font-weight: 900;text-align: center;color: red;font-size: 50px;">分治</p>

<p>以横向为例，不断取横向中间轴作为特定行，不断计算跨此轴的询问的解，复杂度为 $O(n^3logn) = 500^3 * log(500) = 337,371,250$，似乎可行</p>
<p>可以得到第二份代码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> QUERY_LEN = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> NUM = <span class="hljs-number">505</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> DIV = <span class="hljs-number">505</span>;<br><br><span class="hljs-keyword">char</span> mp[NUM][NUM];<br><span class="hljs-keyword">int</span> n, m, ans[QUERY_LEN];<br><span class="hljs-keyword">int</span> L[NUM][NUM], U[NUM][NUM];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span> &#123;</span><br>    <span class="hljs-keyword">int</span> id, x1, y1, x2, y2;<br>&#125;;<br><span class="hljs-built_in">vector</span>&lt;node&gt; queryList;<br><span class="hljs-keyword">unsigned</span> vis1[NUM][NUM][DIV], vis2[NUM][NUM][DIV];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reset</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> *v)</span> </span>&#123;<br>    <span class="hljs-built_in">memset</span>(v, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">unsigned</span>) * DIV);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">cpFlag</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> *dist, <span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> *from)</span> </span>&#123;<br>    <span class="hljs-built_in">memcpy</span>(dist, from, <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">unsigned</span>) * DIV);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">orFlag</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> *dist, <span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> *from)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; DIV; ++i) dist[i] |= from[i];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFlagTrue</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> *v, <span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>    v[id] = <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">andFlagAny</span><span class="hljs-params">(<span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> *a, <span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> *b)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; DIV; ++i) <span class="hljs-keyword">if</span> (a[i] &amp; b[i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-built_in">vector</span>&lt;node&gt; &amp;q)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (l &gt; r) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = mid; i &gt;= l; i--) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = m; j &gt;= <span class="hljs-number">1</span>; j--) &#123;<br>            reset(vis1[i][j]);<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span> (i == mid) setFlagTrue(vis1[i][j], j);<br>            <span class="hljs-keyword">else</span> cpFlag(vis1[i][j], vis1[i + <span class="hljs-number">1</span>][j]);<br>            orFlag(vis1[i][j], vis1[i][j + <span class="hljs-number">1</span>]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = mid; i &lt;= r; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>            reset(vis2[i][j]);<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span> (i == mid) setFlagTrue(vis2[i][j], j);<br>            <span class="hljs-keyword">else</span> cpFlag(vis2[i][j], vis2[i - <span class="hljs-number">1</span>][j]);<br>            orFlag(vis2[i][j], vis2[i][j - <span class="hljs-number">1</span>]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;node&gt; vl, vr;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it: q) &#123;<br>        <span class="hljs-keyword">if</span> (it.x2 &lt; mid) vl.push_back(it);<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (it.x1 &gt; mid) vr.push_back(it);<br>        <span class="hljs-keyword">else</span> ans[it.id] = andFlagAny(vis1[it.x1][it.y1], vis2[it.x2][it.y2]);<br>    &#125;<br>    dfs(l, mid - <span class="hljs-number">1</span>, vl);<br>    dfs(mid + <span class="hljs-number">1</span>, r, vr);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; mp[i][j];<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;0&#x27;</span>) L[i][j] = L[i][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;0&#x27;</span>) U[i][j] = U[i - <span class="hljs-number">1</span>][j] + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">int</span> q;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; i++) &#123;<br>        <span class="hljs-keyword">int</span> op, x1, x2, y1, y2;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; op &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;<br>        <span class="hljs-keyword">if</span> (x1 &gt; x2 || y1 &gt; y2) &#123;<br>            ans[i] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">if</span> (y1 != y2 || U[x2][y2] &lt; x2 - x1) ans[i] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> ans[i] = <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op == <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">if</span> (x1 != x2 || L[x2][y2] &lt; y2 - y1) ans[i] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> ans[i] = <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            queryList.push_back(&#123;i, x1, y1, x2, y2&#125;);<br>        &#125;<br>    &#125;<br>    dfs(<span class="hljs-number">1</span>, n, queryList);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; i++) <span class="hljs-built_in">cout</span> &lt;&lt; (ans[i] ? <span class="hljs-string">&quot;yes\n&quot;</span> : <span class="hljs-string">&quot;no\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>但是，还是不对，实际上是空间超限了</p>
<p>仔细思考，实际上我们使用了 <code>int</code> 来模拟一个布尔值组，非常浪费空间，可以进行压位，得到最终的代码，此时的复杂度为 $O(n^3logn / 64) = 500^3 * log(500) / 64 = 5,271,425$，</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&quot;bits/stdc++.h&quot;</span></span><br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> QUERY_LEN = <span class="hljs-number">1e5</span> + <span class="hljs-number">10</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> NUM = <span class="hljs-number">505</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> DIV = <span class="hljs-number">8</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> LEN = <span class="hljs-number">64</span>;<br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">long</span> <span class="hljs-keyword">long</span> bits;<br><br><span class="hljs-keyword">char</span> mp[NUM][NUM];<br><span class="hljs-keyword">int</span> n, m, ans[QUERY_LEN];<br><span class="hljs-keyword">int</span> L[NUM][NUM], U[NUM][NUM];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">node</span> &#123;</span><br>    <span class="hljs-keyword">int</span> id, x1, y1, x2, y2;<br>&#125;;<br><span class="hljs-built_in">vector</span>&lt;node&gt; queryList;<br>bits vis1[NUM][NUM][DIV], vis2[NUM][NUM][DIV];<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">reset</span><span class="hljs-params">(bits *v)</span> </span>&#123;<br>    <span class="hljs-built_in">memset</span>(v, <span class="hljs-number">0</span>, <span class="hljs-keyword">sizeof</span>(bits) * DIV);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">cpFlag</span><span class="hljs-params">(bits *dist, <span class="hljs-keyword">const</span> bits *from)</span> </span>&#123;<br>    <span class="hljs-built_in">memcpy</span>(dist, from, <span class="hljs-keyword">sizeof</span>(bits) * DIV);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">orFlag</span><span class="hljs-params">(bits *dist, <span class="hljs-keyword">const</span> bits *from)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; DIV; ++i) dist[i] |= from[i];<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setFlagTrue</span><span class="hljs-params">(bits *v, <span class="hljs-keyword">int</span> id)</span> </span>&#123;<br>    v[id / LEN] |= ((bits) <span class="hljs-number">1u</span>) &lt;&lt; (id % LEN);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">andFlagAny</span><span class="hljs-params">(<span class="hljs-keyword">const</span> bits *a, <span class="hljs-keyword">const</span> bits *b)</span> </span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; DIV; ++i) <span class="hljs-keyword">if</span> (a[i] &amp; b[i]) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> l, <span class="hljs-keyword">int</span> r, <span class="hljs-built_in">vector</span>&lt;node&gt; &amp;q)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (l &gt; r) <span class="hljs-keyword">return</span>;<br>    <span class="hljs-keyword">int</span> mid = (l + r) &gt;&gt; <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = mid; i &gt;= l; i--) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = m; j &gt;= <span class="hljs-number">1</span>; j--) &#123;<br>            reset(vis1[i][j]);<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span> (i == mid) setFlagTrue(vis1[i][j], j);<br>            <span class="hljs-keyword">else</span> cpFlag(vis1[i][j], vis1[i + <span class="hljs-number">1</span>][j]);<br>            orFlag(vis1[i][j], vis1[i][j + <span class="hljs-number">1</span>]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = mid; i &lt;= r; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>            reset(vis2[i][j]);<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;1&#x27;</span>) <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-keyword">if</span> (i == mid) setFlagTrue(vis2[i][j], j);<br>            <span class="hljs-keyword">else</span> cpFlag(vis2[i][j], vis2[i - <span class="hljs-number">1</span>][j]);<br>            orFlag(vis2[i][j], vis2[i][j - <span class="hljs-number">1</span>]);<br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">vector</span>&lt;node&gt; vl, vr;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it: q) &#123;<br>        <span class="hljs-keyword">if</span> (it.x2 &lt; mid) vl.push_back(it);<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (it.x1 &gt; mid) vr.push_back(it);<br>        <span class="hljs-keyword">else</span> ans[it.id] = andFlagAny(vis1[it.x1][it.y1], vis2[it.x2][it.y2]);<br>    &#125;<br>    dfs(l, mid - <span class="hljs-number">1</span>, vl);<br>    dfs(mid + <span class="hljs-number">1</span>, r, vr);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">solve</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; mp[i][j];<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;0&#x27;</span>) L[i][j] = L[i][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">1</span>; j &lt;= m; j++) &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (mp[i][j] == <span class="hljs-string">&#x27;0&#x27;</span>) U[i][j] = U[i - <span class="hljs-number">1</span>][j] + <span class="hljs-number">1</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">int</span> q;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; q;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; i++) &#123;<br>        <span class="hljs-keyword">int</span> op, x1, x2, y1, y2;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; op &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;<br>        <span class="hljs-keyword">if</span> (x1 &gt; x2 || y1 &gt; y2) &#123;<br>            ans[i] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">continue</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (op == <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">if</span> (y1 != y2 || U[x2][y2] &lt; x2 - x1) ans[i] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> ans[i] = <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (op == <span class="hljs-number">2</span>) &#123;<br>            <span class="hljs-keyword">if</span> (x1 != x2 || L[x2][y2] &lt; y2 - y1) ans[i] = <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">else</span> ans[i] = <span class="hljs-number">1</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            queryList.push_back(&#123;i, x1, y1, x2, y2&#125;);<br>        &#125;<br>    &#125;<br>    dfs(<span class="hljs-number">1</span>, n, queryList);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= q; i++) <span class="hljs-built_in">cout</span> &lt;&lt; (ans[i] ? <span class="hljs-string">&quot;yes\n&quot;</span> : <span class="hljs-string">&quot;no\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<p>当然，如果你了解 <code>bitset</code> 的话，那么就更好办了</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/ACM/">ACM</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/11/25/develop-note/git-remote-reconnect/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">GitHub 下载的 zip 代码如何与原仓库再次建立连接</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/11/18/develop-note/dockerfile-run-apt-install-jdk-8/">
                        <span class="hidden-mobile">Dockerfile 中下载 JDK8</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'Hukeqing/Hukeqing.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://github.com/Hukeqing/" target="_blank" rel="nofollow noopener"><span>GitHub@Mauve</span></a> <div> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>





  

  
    <!-- MathJax -->
    <script>
      MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']]
        },
        options: {
          renderActions: {
            findScript: [10, doc => {
              document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                const display = !!node.type.match(/; *mode=display/);
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                const text = document.createTextNode('');
                node.parentNode.replaceChild(text, node);
                math.start = { node: text, delim: '', n: 0 };
                math.end = { node: text, delim: '', n: 0 };
                doc.math.push(math);
              });
            }, '', false],
            insertedScript: [200, () => {
              document.querySelectorAll('mjx-container').forEach(node => {
                let target = node.parentNode;
                if (target.nodeName.toLowerCase() === 'li') {
                  target.parentNode.classList.add('has-jax');
                }
              });
            }, '', false]
          }
        }
      };
    </script>

    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-svg.js" ></script>

  











<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
